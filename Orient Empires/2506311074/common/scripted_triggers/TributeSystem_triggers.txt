############# TributeSystem_triggers
# by 往来天地间 WangLaiTianDiJian
# TributeSystem

#一、朝贡机制
#
#在宗主国-朝贡国关系中，双方获得的影响
#朝贡国将在收入、革新、发展度上获得收益，但会损失威望、宗族威望，朝贡国所在文化有机会获得新的革新（详情见“因素影响机制-第7类”的说明）
#玩家作为宗主国时，将定期面临是否支付金钱维持朝贡关系抉择，但在面临该抉择时，还可以选择追加金钱投入获得来自朝贡国的事件兵（详情见“因素影响机制-第5类”的说明）
#
#对于统治者A、B，A可以成为B的朝贡国以及可以维持B的朝贡国地位的条件为：
#A为独立统治者，等级大于男爵
#A、B之间没有任何直接/间接的领主-封臣关系
#A的主头衔级别低于B
#A、B间不在交战，也没有因为劫掠而保持敌对
#
#若一个统治者已有宗主国，其无法向另一个统治者提出成为其朝贡国
#系统定期判定双方是否仍满足宗主国-朝贡国关系的维持条件，若不满足，自动解除关系
#宣战、加入战争、劫掠这类敌对行为将自动解除宗主国-朝贡国关系





TributeSystem_can_ask_to_be_tributary_of_trigger = {#可以提出成为其朝贡国
	TributeSystem_can_be_tributary_of_trigger = { SUZERAIN = $SUZERAIN$ }
	NOT = { any_relation = { type = WLTDJ_suzerain is_alive = yes } }
	NOT = { has_relation_WLTDJ_suzerain = scope:$SUZERAIN$ }
}

TributeSystem_can_be_tributary_of_trigger = {#可以成为其朝贡国
	is_independent_ruler = yes
	primary_title.tier > tier_barony
	NOT = { is_vassal_or_below_of = scope:$SUZERAIN$ } 
	NOT = { is_liege_or_above_of = scope:$SUZERAIN$ }
	NOT = { this = scope:$SUZERAIN$ }
	tier_difference = {
		target = scope:$SUZERAIN$
		value < 0
	}
	NOT = { is_at_war_with = scope:$SUZERAIN$ }
	NOT = { is_causing_raid_hostility_towards = scope:$SUZERAIN$ }
	scope:$SUZERAIN$ = {
		is_independent_ruler = yes
		primary_title.tier > tier_barony
	}
}


TributeSystem_can_ask_to_be_suzerain_of_trigger = {#可以提出成为其宗主国
	TributeSystem_can_be_suzerain_of_trigger = { TRIBUTARY = $TRIBUTARY$ }
	NOT = { has_relation_WLTDJ_tributary = scope:$TRIBUTARY$ }
}


TributeSystem_can_be_suzerain_of_trigger = {#可以成为其宗主国
	is_independent_ruler = yes
	primary_title.tier > tier_barony
	NOT = { is_vassal_or_below_of = scope:$TRIBUTARY$ } 
	NOT = { is_liege_or_above_of = scope:$TRIBUTARY$ }
	NOT = { this = scope:$TRIBUTARY$ }
	tier_difference = {
		target = scope:$TRIBUTARY$
		value > 0
	}
	NOT = { is_at_war_with = scope:$TRIBUTARY$ }
	NOT = { is_causing_raid_hostility_towards = scope:$TRIBUTARY$ }
	scope:$TRIBUTARY$ = {
		is_independent_ruler = yes
		primary_title.tier > tier_barony
	}
}

TributeSystem_can_offer_allegiance_trigger = {
#	has_perk = defensive_negotiations_perk
#	dynasty.dynasty_prestige_level >= 5
#	prestige_level >= 3
	diplomacy >= 0
}


TributeSystem_can_demand_allegiance_trigger= {
#	has_perk = defensive_negotiations_perk
#	dynasty.dynasty_prestige_level >= 5
#	prestige_level >= 3
	diplomacy >= 0
}
