############################## SpecialRelevantFactorImpactOnRuler_values
# by 往来天地间 WangLaiTianDiJian
# SpecialRelevantFactorImpactOnRuler

#WLTDJ20220123

SpecialRelevantFactorImpactOnRuler_learning_culture_progress_value = {#文化学习
	value = 0
	if = {
		limit = { culture = { exists = var:WLTDJ_learning_culture_progress } }
		add = culture.var:WLTDJ_learning_culture_progress
	}
}


SpecialRelevantFactorImpactOnRuler_tribute_interval_year = 3 #朝贡要钱事件间隔


SpecialRelevantFactorImpactOnRuler_type_A_01_authority_punishment_grace_period = 5 #连续满足降低君权条件时，才会触发降低君权


####发俸禄
SpecialRelevantFactorImpactOnRuler_courtier_annuity_value = { #廷臣俸禄
	value = 0
	add = diplomacy
	add = stewardship
	add = martial
	add = intrigue
	add = learning
	add = prowess
	multiply = 0.03
	if = {
		limit = { is_close_family_of = liege }
		add = 0.1
	}
	else_if = {
		limit = { is_extended_family_of = liege }
		add = 0.1
	}
	else_if = {
		limit = { house = liege.house }
		add = 0.1
	}
	if = {
		limit = { is_consort_of = liege }
		add = 0.1
	}
	else_if = {
		limit = { is_concubine_of = liege }
		add = 0.1
	}

}

SpecialRelevantFactorImpactOnRuler_councillor_annuity_value = { #内阁成员俸禄
	value = 0
	add = perk_points_assigned
	add = { value = { every_close_family_member = { add = 0.5 } }	}  #家眷
	multiply = { value = root.dynasty.dynasty_prestige_level multiply=0.3 add=0.7 }  #荫荣
	multiply = { #禄级
		value = 0.2
		if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 0 }
			}
			add = 0.00
		}
		if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 1 }
			}
			add = 0.2
		}
		else_if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 2 }
			}
			add = 0.3
		}
		else_if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 3 }
			}
			add = 0.5
		}
		else_if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 4 }
			}
			add = 0.7
		}
		else_if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 5 }
			}
			add = 1
		}
	}
}

SpecialRelevantFactorImpactOnRuler_direct_vassal_annuity_value = { #直属封臣俸禄
	value = 0
	#add = { value = sub_realm_size multiply = 1.2 }
	#add = { value = monthly_character_income multiply = 1.2 }

	add = { value = sub_realm_size }  #差遣
	add = { value = vassal_count } #兼领
	add = { value = { every_held_title = { add = 1 } } }  #使职
	add = { value = root.dynasty.dynasty_prestige_level }  #荫荣
	multiply = { value = highest_held_title_tier multiply = 0.33 }  #官阶
	multiply = { #禄级
		value = 0.1
		if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 0 }
			}
			add = 0.00
		}
		if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 1 }
			}
			add = 0.05
		}
		else_if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 2 }
			}
			add = 0.15
		}
		else_if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 3 }
			}
			add = 0.25
		}
		else_if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 4 }
			}
			add = 0.5
		}
		else_if = {
			limit = {
				has_trait_rank = { trait = BureaucracyEmpire_lifestyle_bureaucrat rank = 5 }
			}
			add = 0.8
		}
	}
}


################################转移支付
SpecialRelevantFactorImpactOnRuler_county_monthly_income = {
	value = 0
	every_county_province = { add = monthly_income }
}

SpecialRelevantFactorImpactOnRuler_total_county = {
	value = 0
	every_sub_realm_county = { add = 1 }	
}

SpecialRelevantFactorImpactOnRuler_average_county_monthly_income = {
	value = 0
	every_sub_realm_county = { add = SpecialRelevantFactorImpactOnRuler_county_monthly_income }
	divide = SpecialRelevantFactorImpactOnRuler_total_county
}



SpecialRelevantFactorImpactOnRuler_type_A_12_county_total_income = {
	
}



SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value = 10
SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value = 10


SpecialRelevantFactorImpactOnRuler_type_A_12_distance_value = {
	#第一阶段梯度
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 10000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 40000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
#	}
	if = {
		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 90000 } } }
		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 160000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 250000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
#	}
	if = {
		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 360000 } } }
		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 490000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 640000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
#	}
	if = {
		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 810000 } } }
		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 1000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_A_value
#	}
#
##第二阶段梯度
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 4000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
#	}
	if = {
		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 9000000 } } }
		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 16000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 25000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 36000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 49000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 64000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 81000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
#	}
#	if = {
#		limit = { title_capital_county = { squared_distance = { target = holder.top_liege.capital_province value > 100000000 } } }
#		subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_per_distance_level_B_value
#	}
	divide = 40
}


SpecialRelevantFactorImpactOnRuler_type_A_12_actual_to_theoretical_subsidy_ratio = {
	value = 1
	add = SpecialRelevantFactorImpactOnRuler_type_A_12_distance_value
}

SpecialRelevantFactorImpactOnRuler_type_A_12_theoretical_single_county_subsidy = {
	value = 0
	if = {
		limit = { SpecialRelevantFactorImpactOnRuler_county_monthly_income < holder.top_liege.SpecialRelevantFactorImpactOnRuler_average_county_monthly_income }
		add = holder.top_liege.SpecialRelevantFactorImpactOnRuler_average_county_monthly_income
		subtract = SpecialRelevantFactorImpactOnRuler_county_monthly_income
		#multiply = 1   #修改
	}
}

SpecialRelevantFactorImpactOnRuler_type_A_12_actual_single_county_subsidy = {
	value = SpecialRelevantFactorImpactOnRuler_type_A_12_theoretical_single_county_subsidy
	multiply = SpecialRelevantFactorImpactOnRuler_type_A_12_actual_to_theoretical_subsidy_ratio
}

SpecialRelevantFactorImpactOnRuler_type_A_12_waste_single_county_subsidy = {
	value = SpecialRelevantFactorImpactOnRuler_type_A_12_theoretical_single_county_subsidy
	multiply = { value = 1 subtract = SpecialRelevantFactorImpactOnRuler_type_A_12_actual_to_theoretical_subsidy_ratio }
}

SpecialRelevantFactorImpactOnRuler_type_A_12_theoretical_total_subsidy_for_a_person = {
	value = 0
	if = {
		limit = {
			exists = this
			save_temporary_scope_as = temp_character
		}
		every_sub_realm_county	= {
			limit = {
				holder = scope:temp_character
				SpecialRelevantFactorImpactOnRuler_type_A_12_county_trigger = yes
			}
			add = SpecialRelevantFactorImpactOnRuler_type_A_12_theoretical_single_county_subsidy
		}
	}
}

SpecialRelevantFactorImpactOnRuler_type_A_12_actual_total_subsidy_for_a_person = {
	value = 0
	if = {
		limit = {
			exists = this
			save_temporary_scope_as = temp_character
		}
		every_sub_realm_county	= {
			limit = {
				holder = scope:temp_character
				SpecialRelevantFactorImpactOnRuler_type_A_12_county_trigger = yes
			}
			add = SpecialRelevantFactorImpactOnRuler_type_A_12_actual_single_county_subsidy
		}
	}
}

SpecialRelevantFactorImpactOnRuler_type_A_12_waste_total_subsidy_for_a_person = {
	value = 0
	if = {
		limit = {
			exists = this
			save_temporary_scope_as = temp_character
		}
		every_sub_realm_county	= {
			limit = {
				holder = scope:temp_character
				SpecialRelevantFactorImpactOnRuler_type_A_12_county_trigger = yes
			}
			add = SpecialRelevantFactorImpactOnRuler_type_A_12_waste_single_county_subsidy
		}
	}
}


