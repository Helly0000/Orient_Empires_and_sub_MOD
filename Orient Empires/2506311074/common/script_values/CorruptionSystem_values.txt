############################## CorruptionSystem_values
# by 往来天地间 WangLaiTianDiJian
# CorruptionSystem


#影响腐败度各项基础值，填整数，便于显示，
CorruptionSystem_ambitious_value = {
	if = {
		limit = { has_trait = ambitious }
		add = 10
	}	
}

CorruptionSystem_greedy_value = {
	if = { limit = { has_trait = greedy }
		add = 10
	}
}

CorruptionSystem_deceitful_value = {
	if = { limit = { has_trait = deceitful }
		add = 10
	}
}

CorruptionSystem_gluttonous_value = {
	if = { limit = { has_trait = gluttonous }
		add = 10
	}
}

CorruptionSystem_just_value = {
	if = { limit = { has_trait = just }
		subtract = 10
	}
}

CorruptionSystem_honest_value = {
	if = {
		limit = { has_trait = honest }
		subtract = 10
	}
}

CorruptionSystem_generous_value = {
	if = {
		limit = { has_trait = generous }
		subtract = 10
	}
}

CorruptionSystem_content_value = {
	if = {
		limit = { has_trait = content }
		subtract = 10
	}
}

CorruptionSystem_realm_size_value = {
	if = {
		limit = { sub_realm_size >= 10 }
		add = {
			value = sub_realm_size
			subtract = domain_size
			multiply = 10
		}
	}
}

CorruptionSystem_consort_value = {
	if = {
		limit = { any_consort = { count >= 2 is_alive = yes } }
		every_consort = { add = 10 }
		subtract = 10
	}
}

CorruptionSystem_stewardship_value = {
	add = {
		value = stewardship
		subtract = liege.stewardship
		multiply = 2
	}

}

CorruptionSystem_imperial_contract_0_value = {
	if = {
		limit = { vassal_contract_has_flag = imperial_contract_0 }
		subtract = 100
	}
}

CorruptionSystem_imperial_contract_1_value = {
	if = {
		limit = { vassal_contract_has_flag = imperial_contract_1 }
		add = 50
	}
}

CorruptionSystem_imperial_contract_2_value = {
	if = {
		limit = { vassal_contract_has_flag = imperial_contract_2 }
		add = 200
	}
}

CorruptionSystem_crown_authority_value = {
	if = {
		limit = { liege = { has_realm_law = crown_authority_0 } }
		add = 60
	}
	if = {
		limit = { liege = { has_realm_law = crown_authority_1 } }
		add = 30
	}
	if = {
		limit = { liege = { has_realm_law = crown_authority_2 } }
		subtract = 0
	}
	if = {
		limit = { liege = { has_realm_law = crown_authority_3 } }
		subtract = 60
	}
}





CorruptionSystem_per_distance_level_A_value = 10
CorruptionSystem_per_distance_level_B_value = 10
#CorruptionSystem_distance_amplifier = 0.5

CorruptionSystem_distance_value = {
	if = {
		limit = { exists = capital_county }
#第一阶段梯度
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 10000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 40000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 90000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 160000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 250000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 360000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 490000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 640000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 810000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 810000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 1000000 } } }
			add = CorruptionSystem_per_distance_level_A_value
		}

	#第二阶段梯度
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 4000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 9000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 16000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 25000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 36000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 49000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 64000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 81000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 81000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
		if = {
			limit = { capital_county = { squared_distance = { target = holder.liege.capital_county value > 100000000 } } }
			add = CorruptionSystem_per_distance_level_B_value
		}
	}
}



#总腐败度
CorruptionSystem_corruption_value = {
	if = {
		limit = { is_ai = yes }
		add = CorruptionSystem_ambitious_value
		add = CorruptionSystem_greedy_value
		add = CorruptionSystem_deceitful_value
		add = CorruptionSystem_gluttonous_value
		add = CorruptionSystem_just_value
		add = CorruptionSystem_honest_value
		add = CorruptionSystem_generous_value
		add = CorruptionSystem_content_value
	}

	add = CorruptionSystem_realm_size_value
	add = CorruptionSystem_consort_value
	add = CorruptionSystem_stewardship_value
	add = CorruptionSystem_imperial_contract_0_value
	add = CorruptionSystem_imperial_contract_1_value
	add = CorruptionSystem_imperial_contract_2_value
	add = CorruptionSystem_distance_value
}

CorruptionSystem_corruption_excluding_contract_value = {#剔除契约类型影响的腐败度
	if = {
		limit = { is_ai = yes }
		add = CorruptionSystem_ambitious_value
		add = CorruptionSystem_greedy_value
		add = CorruptionSystem_deceitful_value
		add = CorruptionSystem_gluttonous_value
		add = CorruptionSystem_just_value
		add = CorruptionSystem_honest_value
		add = CorruptionSystem_generous_value
		add = CorruptionSystem_content_value
	}

	add = CorruptionSystem_realm_size_value
	add = CorruptionSystem_consort_value
	add = CorruptionSystem_stewardship_value
	add = CorruptionSystem_distance_value
}


#契约相关，无需修改
imperial_tax_exempt_level = 0
imperial_tax_low_level = 1
imperial_tax_normal_level = 2
imperial_tax_high_level = 3
imperial_tax_extortionate_level = 4

imperial_levies_exempt_level = 0
imperial_levies_low_level = 1
imperial_levies_normal_level = 2
imperial_levies_high_level = 3
imperial_levies_extortionate_level = 4


CorruptionSystem_base_tax_rate_baron_bureau = 0.1
CorruptionSystem_base_tax_rate_baron_corps = 0.1
CorruptionSystem_base_tax_rate_baron_imperial = 0.1
CorruptionSystem_base_tax_rate_special_imperial_bureau_0 = 0.2 #0.25
CorruptionSystem_base_tax_rate_special_imperial_bureau_1 = 0.15 #0.1
CorruptionSystem_base_tax_rate_special_imperial_bureau_2 = 0.3 #0.25
CorruptionSystem_base_tax_rate_special_imperial_bureau_3 = 0.35 #0.3
CorruptionSystem_base_tax_rate_special_imperial_corps_0 = 0.1 #0.05
CorruptionSystem_base_tax_rate_special_imperial_corps_1 = 0
CorruptionSystem_base_tax_rate_special_imperial_corps_2 = 0
CorruptionSystem_base_tax_rate_special_imperial_corps_3 = 0
CorruptionSystem_base_tax_rate_special_imperial_corps_4 = 0.02 #0.05
CorruptionSystem_base_tax_rate_special_imperial_royal_0 = 0.35 #0.3
CorruptionSystem_base_tax_rate_special_imperial_royal_1 = 0.40 #0.35
CorruptionSystem_base_tax_rate_special_imperial_royal_2 = 0.40 #0.35







#税收受腐败度影响


CorruptionSystem_base_tax_rate_value = {#各契约类型税收计算。契约等级为“正常”时的数值
	if = {
		limit = { primary_title.tier = tier_barony }
		if = {
			limit = { has_government = bureau_government }
			add = CorruptionSystem_base_tax_rate_baron_bureau
		}
		else_if = {
			limit = { has_government = corps_government }
			add = CorruptionSystem_base_tax_rate_baron_corps
		}
		else_if = {
			limit = { has_government = imperial_government }
			add = CorruptionSystem_base_tax_rate_baron_imperial
		}
	}
	else_if = {
		limit = { vassal_contract_has_flag = imperial_contract_0 }
		if = {
			limit = { vassal_contract_has_flag = imperial_bureau_0 }
			add = CorruptionSystem_base_tax_rate_special_imperial_bureau_0
		}
		else_if = {
			limit = { vassal_contract_has_flag = imperial_bureau_1 }
			add = CorruptionSystem_base_tax_rate_special_imperial_bureau_1
		}	
		else_if = {
			limit = { vassal_contract_has_flag = imperial_bureau_2 }
			add = CorruptionSystem_base_tax_rate_special_imperial_bureau_2
		}
		else_if = {
			limit = { vassal_contract_has_flag = imperial_bureau_3 }
			add = CorruptionSystem_base_tax_rate_special_imperial_bureau_3
		}
	}
	else_if = {
		limit = { vassal_contract_has_flag = imperial_contract_1 }
		if = {
			limit = { vassal_contract_has_flag = imperial_corps_0 }
			add = CorruptionSystem_base_tax_rate_special_imperial_corps_0
		}
		else_if = {
			limit = { vassal_contract_has_flag = imperial_corps_1 }
			add = CorruptionSystem_base_tax_rate_special_imperial_corps_1
		}
		else_if = {
			limit = { vassal_contract_has_flag = imperial_corps_2 }
			add = CorruptionSystem_base_tax_rate_special_imperial_corps_2
		}
		else_if = {
			limit = { vassal_contract_has_flag = imperial_corps_3 }
			add = CorruptionSystem_base_tax_rate_special_imperial_corps_3
		}
		else_if = {
			limit = { vassal_contract_has_flag = imperial_corps_4 }
			add = CorruptionSystem_base_tax_rate_special_imperial_corps_4
		}
	}
	else_if = {
		limit = { vassal_contract_has_flag = imperial_contract_2 }
		if = {
			limit = { vassal_contract_has_flag = imperial_royal_0 }
			add = CorruptionSystem_base_tax_rate_special_imperial_royal_0
		}
		else_if = {
			limit = { vassal_contract_has_flag =imperial_royal_1  }
			add = CorruptionSystem_base_tax_rate_special_imperial_royal_1
		}
		else_if = {
			limit = { vassal_contract_has_flag = imperial_royal_2 }
			add = CorruptionSystem_base_tax_rate_special_imperial_royal_2
		}
	}
}

CorruptionSystem_exempt_imperial_tax_value = { value = exempt_feudal_tax divide = normal_feudal_tax }
CorruptionSystem_low_imperial_tax_value = { value = low_feudal_tax divide = normal_feudal_tax }
CorruptionSystem_normal_imperial_tax_value = 1
CorruptionSystem_high_imperial_tax_value = { value = high_feudal_tax divide = normal_feudal_tax }
CorruptionSystem_extortionate_imperial_tax_value = { value = extortionate_feudal_tax divide = normal_feudal_tax }



CorruptionSystem_tax_level_value = {#契约等级修正
	if = {
		limit = { vassal_contract_obligation_level:imperial_government_taxes = feudal_tax_normal_level }
		value = CorruptionSystem_normal_imperial_tax_value
	}
	else_if = {
		limit = { vassal_contract_obligation_level:imperial_government_taxes = feudal_tax_normal_level }
		value = CorruptionSystem_high_imperial_tax_value
	}
	else_if = {
		limit = { vassal_contract_obligation_level:imperial_government_taxes = feudal_tax_extortionate_level }
		value = CorruptionSystem_extortionate_imperial_tax_value
	}
	else_if = {
		limit = { vassal_contract_obligation_level:imperial_government_taxes = feudal_tax_low_level }
		value = CorruptionSystem_low_imperial_tax_value
	}
	else_if = {
		limit = { vassal_contract_obligation_level:imperial_government_taxes = feudal_tax_exempt_level }
		value = CorruptionSystem_exempt_imperial_tax_value
	}
}



CorruptionSystem_corruption_tax_multiplier = -0.002
CorruptionSystem_corruption_tax_multiplier_display = { value = CorruptionSystem_corruption_tax_multiplier multiply = 100 }
CorruptionSystem_corruption_tax_max = 0.1
CorruptionSystem_corruption_tax_min = -0.5
CorruptionSystem_corruption_tax_value = {#腐败度修正
	value = CorruptionSystem_corruption_excluding_contract_value
	multiply = CorruptionSystem_corruption_tax_multiplier
	max = CorruptionSystem_corruption_tax_max
	min = CorruptionSystem_corruption_tax_min
}


CorruptionSystem_tax_before_obligation_level_value = {#最终比例（后续仍受特殊契约类型影响）
	value = CorruptionSystem_base_tax_rate_value
	multiply = { value = CorruptionSystem_corruption_tax_value add = 1 }
}

CorruptionSystem_tax_value = {#最终比例（后续仍受特殊契约类型影响）
	value = 0
	if = {
		limit = {
			CorruptionSystem_use_corruption_trigger = yes
		}
		add = CorruptionSystem_base_tax_rate_value
		multiply = CorruptionSystem_tax_level_value
		multiply = { value = CorruptionSystem_corruption_tax_value add = 1 }
	}
}



#互动接受度受腐败度影响
CorruptionSystem_corruption_imprison_value = {
	value = CorruptionSystem_corruption_value
	multiply = -0.3
	max = 20
	min = -50
}

CorruptionSystem_corruption_revoke_title_value = {
	value = CorruptionSystem_corruption_value
	multiply = -0.25
	max = 20
	min = -50
}

CorruptionSystem_corruption_retract_vassal_value =  {
	value = CorruptionSystem_corruption_value
	multiply = -0.2
	max = 20
	min = -50
}

#派系
CorruptionSystem_corruption_general_faction_value =  {
	value = CorruptionSystem_corruption_value
	multiply = 0.2
	max = 30
	min = -20
}








