independence_faction_modifiers = {
	modifier = { # Electors are less likely to join independence factions, if they're the same faith
		add = -150
		$FACTION_TARGET$.primary_title = {
			has_order_of_succession = election
			any_elector = {
				this = root	
			}
		}
		$FACTION_TARGET$.faith = root.faith
	}

	# Liege is not my Rightful Liege or a consequent par of my Realm is outside of their De Jure
	modifier = {
		add = {
			value = 125
			# Larger realms are inherently more rebellious.
			add = {
				value = sub_realm_size
				multiply = 2
			}
		}
		OR = {
	 		NOT = {
				is_rightful_liege_of_trigger = {
					VASSAL = root
					LIEGE = $FACTION_TARGET$
				}
			}
			any_sub_realm_county = {
				percent <= 0.5
				save_temporary_scope_as = current_county
				$FACTION_TARGET$.primary_title = {
					any_in_de_jure_hierarchy = {
						this = scope:current_county
					}
				}
			}
		}
	}

	# Kingdoms gain an additional boost to independence, as they don't like being under the thumb of others.
	modifier = {
		add = { # High-grandeur Kings will want independence even more
			value =	50
			if = {
				limit = {
					has_royal_court = yes
					$FACTION_TARGET$ = {
						has_royal_court = yes
					}
					court_grandeur_current_level > $FACTION_TARGET$.court_grandeur_current_level
				}
				add = {
					add = court_grandeur_current_level
					subtract = $FACTION_TARGET$.court_grandeur_current_level
					multiply = 15
				}
			}
		}
		highest_held_title_tier = tier_kingdom
	}

	# Lowers independence wishes from Counts.
	modifier = {
		add = -25
		highest_held_title_tier = tier_county
	}

	# Toe the Line Perk
	modifier = {
		add = -50
		$FACTION_TARGET$ = {
			has_perk = toe_the_line_perk
		}
	}

	# Stem Duchies innovation
	modifier = {
		add = -25
		$FACTION_TARGET$ = { culture = { has_innovation = innovation_stem_duchies }	}
		culture = { has_same_culture_heritage = $FACTION_TARGET$.culture }
	}

	# Characters are less likely to join if cultural acceptance is high
	modifier = {
		culture = {
			NOR = {
				this = $FACTION_TARGET$.culture
				cultural_acceptance = { target = $FACTION_TARGET$.culture value >= 90 } # Essentially the same culture
				has_cultural_parameter = doesnt_care_about_culture_faith_in_factions
			}
		}
		add = {
			value = 20
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 20 }
					}
				}
				add = 20
			}
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 35 }
					}
				}
				add = 15
			}
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 50 }
					}
				}
				add = 10
			}
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 70 }
					}
				}
				add = 5
			}
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 80 }
					}
				}
				add = 5
			}
			if = { # The liege knowing your language cuts this penalty in half
				limit = {
					$FACTION_TARGET$ = {
						knows_language_of_culture = prev.culture
					}
				}
				multiply = 0.5
			}
		}
	}

	# If in struggle, rather go for Dissolution faction
	modifier = {
		add = {
			value = 0
			# Some phases give a low chance...
			if = {
				limit = {
					$FACTION_TARGET$ = {
						OR = {
							any_character_struggle = {
								involvement = involved
								is_struggle_type = iberian_struggle
								OR = {
									is_struggle_phase = struggle_iberia_phase_hostility
									is_struggle_phase = struggle_iberia_phase_opportunity
								}
							}
							any_character_struggle = {
								involvement = involved
								is_struggle_type = tartaria_struggle
								OR = {
									is_struggle_phase = struggle_tartaria_phase_hostility
									is_struggle_phase = struggle_tartaria_phase_opportunity
								}
							}
						}
					}
				}
				add = -100
			}
		}
		add = {
			value = 0
			# Some phases give a low chance...
			if = {
				limit = {
					$FACTION_TARGET$ = {
						any_character_struggle = {
							involvement = involved
							is_struggle_type = tartaria_struggle
							OR = {
								is_struggle_phase = struggle_tartaria_phase_hostility
								is_struggle_phase = struggle_tartaria_phase_opportunity
							}
						}
					}
				}
				add = -100
			}
		}
		$FACTION_TARGET$ = {
			any_character_struggle = { involvement = involved }
		}
		OR = {
			is_powerful_vassal_of = $FACTION_TARGET$
			$FACTION_TARGET$ = {
				any_targeting_faction = {
					faction_is_type = nation_fracturing_faction
				}
			}
		}
	}
}
nation_fracturing_faction_modifiers = {

	# Short reign increase the change of NF
	modifier = {
		add = {
			value = 0
			if =  {
				limit =  {
					$FACTION_TARGET$ = {
						primary_title = {
							title_held_years <= 1
						}
					}
				}
				add = 20
			}
			if =  {
				limit =  {
					$FACTION_TARGET$ = {
						primary_title = {
							title_held_years <= 5
						}
					}
				}
				add = 10
			}
			if =  {
				limit =  {
					$FACTION_TARGET$ = {
						primary_title = {
							title_held_years <= 10
						}
					}
				}
				add = 10
			}
		}
	}

	# Lower the score if there are claimants of my culture
	modifier = {
		add = -200
		$FACTION_TARGET$ = {
			primary_title = {
				any_claimant = {
					count > 0
					culture = root.culture
				}
			}
		}
	}

	# Characters are less likely to join if cultural acceptance is high
	modifier = {
		culture = {
			NOR = {
				this = $FACTION_TARGET$.culture
				cultural_acceptance = { target = $FACTION_TARGET$.culture value >= 90 } # Essentially the same culture
				has_cultural_parameter = doesnt_care_about_culture_faith_in_factions
			}
		}
		add = {
			value = 15
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 20 }
					}
				}
				add = 20
			}
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 35 }
					}
				}
				add = 15
			}
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 50 }
					}
				}
				add = 10
			}
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 70 }
					}
				}
				add = 5
			}
			if = {
				limit = {
					culture = {
						cultural_acceptance = { target = $FACTION_TARGET$.culture value <= 80 }
					}
				}
				add = 5
			}
		}
	}

	# More likely to happen if the target don't control the entirety of the de jure area of any of their title of the same rank as their primary title
	modifier = {
		add = {
			value = 0
			$FACTION_TARGET$ = {
				every_held_title = {
					limit = {
						this.tier = prev.primary_title.tier
						NOT = { $FACTION_TARGET$ = { completely_controls = prev } }
					}
					add = {
						if = {
							limit = { tier = tier_empire }
							add = 50
						}
						else_if = {
							limit = { tier = tier_kingdom }
							add = 20
						}
						else_if = {
							limit = { tier = tier_duchy }
							add = 15
						}
						else_if = {
							limit = { tier = tier_county }
							add = 10
						}
						#bigger penalty for the primary_title
						if = {
							limit = { this = $FACTION_TARGET$.primary_title }
							add = 50
						}
					}
				}
			}
		}
	}

	# more likely to happen if they lost wars or title recently
	modifier = {
		add = {
			value = 0
			if = {
				limit = { $FACTION_TARGET$ = { has_variable =  recently_lost_wars } }
				add = $FACTION_TARGET$.var:recently_lost_wars
				multiply = 30
			}
		}
	}

	# more likely to happen to Tribal and Clans
	modifier = {
		add = {
			value = 0
			if = {
				limit = { $FACTION_TARGET$ = { has_government = tribal_government } }
				add = 25
			}
			else_if = {
				limit = { $FACTION_TARGET$ = { has_government = clan_government } }
				# Increase for each powerful vassal you are not allied with
				add = {
					value = 0
					$FACTION_TARGET$ = {
						every_vassal = {
							limit = {
								is_powerful_vassal_of = $FACTION_TARGET$
								NOT = { is_allied_to = $FACTION_TARGET$ }
							}
							add = 10
						}
					}
				}
			}
		}
	}

	# motivated if the target is involved in various struggle phases.
	modifier = {
		add = {
			value = 0
			# Some phases give a low chance...
			if = {
				limit = {
					$FACTION_TARGET$ = {
						OR = {
							any_character_struggle = {
								involvement = involved
								is_struggle_type = iberian_struggle
								is_struggle_phase = struggle_iberia_phase_hostility
							}
							any_character_struggle = {
								involvement = involved
								is_struggle_type = tartaria_struggle
								is_struggle_phase = struggle_tartaria_phase_hostility
							}
						}
					}
				}
				add = 50
			}
			# ... & some phases give a high chance.
			else_if = {
				limit = {
					$FACTION_TARGET$ = {
						OR = {
							any_character_struggle = {
								involvement = involved
								is_struggle_type = iberian_struggle
								is_struggle_phase = struggle_iberia_phase_opportunity
							}
							any_character_struggle = {
								involvement = involved
								is_struggle_type = tartaria_struggle
								is_struggle_phase = struggle_tartaria_phase_opportunity
							}
						}
					}
				}
				add = 100 # High chance in opportunity
			}
			if = {
				limit = {
					$FACTION_TARGET$ = {
						any_character_struggle = {
							involvement = involved
							is_struggle_type = tartaria_struggle
							is_struggle_phase = struggle_tartaria_phase_hostility
						}
					}
				}
				add = 50
			}
			# ... & some phases give a high chance.
			else_if = {
				limit = {
					$FACTION_TARGET$ = {
						any_character_struggle = {
							involvement = involved
							is_struggle_type = tartaria_struggle
							is_struggle_phase = struggle_tartaria_phase_opportunity
						}
					}
				}
				add = 100 # High chance in opportunity
			}
		}
		$FACTION_TARGET$ = {
			any_character_struggle = { involvement = involved }
		}
	}

	# Less likely for elective title
	modifier = {
		add = -100
	 	$FACTION_TARGET$.primary_title = {
			has_order_of_succession = election
		}
	}
}