############# SpecialRelevantFactorImpactOnRuler_specific_effects
# by 往来天地间 WangLaiTianDiJian
# SpecialRelevantFactorImpactOnRuler

#WLTDJ20220320


###########不同类别具体修正，可修改

SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	scope:affected_ruler_throughout = {
		SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_01_A_character_modifier

		every_neighboring_top_liege_realm_owner = {
			SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
				ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_01_trigger
				MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_01_A_character_modifier
				MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
			}
		}

		SpecialRelevantFactorImpactOnRuler_effect_alert_function_effect = {
			no_alert_flag = SpecialRelevantFactorImpactOnRuler_type_A_01_no_effect_alert
			effect_alert_event_id = SpecialRelevantFactorImpactOnRuler.2001
		}

#		SpecialRelevantFactorImpactOnRuler_type_A_01_crown_authority_reduction_effect = yes #降低君权机制
	}
	clear_saved_scope = affected_ruler_throughout
}

SpecialRelevantFactorImpactOnRuler_type_A_01_crown_authority_reduction_effect = {
	send_interface_message = {
		type = event_generic_bad
		title = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_A.tt
		desc = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_A.tt
		#desc = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_A_notification
		left_icon = scope:affected_ruler_throughout
	}	

	if = {
		limit = { 
			has_realm_law = crown_authority_3
			var:relevant_factor_count > 5
		}

		if = {
			limit = { NOT = { has_variable = SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_2_grace_counter } }
			set_variable = { name = SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_2_grace_counter value = 0 }
			change_variable = { name = SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_2_grace_counter add = 1 }
			if = {
				limit = { var:SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_2_grace_counter = SpecialRelevantFactorImpactOnRuler_type_A_01_authority_punishment_grace_period }
				send_interface_message = {	
					title = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_B.tt
					desc = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_B_notification
					left_icon = scope:affected_ruler_throughout
#						show_as_tooltip = { add_realm_law = crown_authority_2 }
					add_realm_law = crown_authority_2
					add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_cannot_exceed_crown_authority_2 years = 1 }
				}
			}
		}
	}

	else = {
		set_variable = { name = SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_2_grace_counter value = 0 }
	}

	if = {
		limit = { 
			OR = {
#					has_realm_law = crown_authority_1#测试完后记得改回正确数字，下同
				has_realm_law = crown_authority_2
				has_realm_law = crown_authority_3
			}
			var:relevant_factor_count > 10
		}
		if = {
			limit = { NOT = { has_variable = SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_1_grace_counter } }
			set_variable = { name = SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_1_grace_counter value = 0 }
			change_variable = { name = SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_1_grace_counter add = 1 }
			if = {
				limit = { var:SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_1_grace_counter = SpecialRelevantFactorImpactOnRuler_type_A_01_authority_punishment_grace_period }
				send_interface_message = {
					type = event_generic_bad
					title = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_C.tt
					desc = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_C_notification
					left_icon = scope:affected_ruler_throughout
					#show_as_tooltip = { add_realm_law = crown_authority_1 }
					add_realm_law = crown_authority_1
					add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_cannot_exceed_crown_authority_1 years = 1 }
				}
#					send_interface_message = {
#						type = event_generic_bad
#						title = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_C.tt
#						desc = SpecialRelevantFactorImpactOnRuler_type_A_01_impact_effect_tip_C_notification
#						left_icon = scope:affected_ruler_throughout
#					}
			}
		}
	}

	else = {
		set_variable = { name = SpecialRelevantFactorImpactOnRuler_type_A_01_cannot_exceed_authority_1_grace_counter value = 0 }
	}
}

SpecialRelevantFactorImpactOnRuler_type_A_02_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	scope:affected_ruler_throughout = {
		SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_02_A_character_modifier
		
		every_neighboring_top_liege_realm_owner = {
			SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
				ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_02_trigger
				MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_02_A_character_modifier
				MAXMODIFIERCOUNT = 1 #可修改，修正叠加最大数量
			}
		}

		SpecialRelevantFactorImpactOnRuler_effect_alert_function_effect = {
			no_alert_flag = SpecialRelevantFactorImpactOnRuler_type_A_02_no_effect_alert
			effect_alert_event_id = SpecialRelevantFactorImpactOnRuler.2002
		}
	}
	clear_saved_scope = affected_ruler_throughout
}

SpecialRelevantFactorImpactOnRuler_type_A_03_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	scope:affected_ruler_throughout = {
		SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_03_A_character_modifier
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_03_B_character_modifier
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_03_C_character_modifier
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_03_D_character_modifier
		every_ally = {
			limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger = { RULER = trigger_ruler_throughout } }
			add_to_list = relevant_factor_list

		}
		every_relation = {
			type = WLTDJ_suzerain
			limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger = { RULER = trigger_ruler_throughout } }
			add_to_list = relevant_factor_list

		}
		every_in_list = {
			list = relevant_factor_list
			if = {
				limit = {
					scope:affected_ruler_throughout = {
						is_ai = no
						NOT = { has_government = tribal_government }
					}
				}
				SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
					ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_03_A_character_modifier
					MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
				}
			}
			else_if = {
				limit = {
					scope:affected_ruler_throughout = {
						is_ai = yes
						NOT = { has_government = tribal_government }
					}
				}
				SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
					ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_03_B_character_modifier
					MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
				}
			}
			else_if = {
				limit = {
					scope:affected_ruler_throughout = {
						is_ai = no
						has_government = tribal_government
					}
				}
				SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
					ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_03_C_character_modifier
					MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
				}
			}
			else_if = {
				limit = {
					scope:affected_ruler_throughout = {
						is_ai = yes
						has_government = tribal_government
					}
				}
				SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
					ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_03_D_character_modifier
					MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
				}
			}
		}
		SpecialRelevantFactorImpactOnRuler_effect_alert_function_effect = {
			no_alert_flag = SpecialRelevantFactorImpactOnRuler_type_A_03_no_effect_alert
			effect_alert_event_id = SpecialRelevantFactorImpactOnRuler.2003
		}
	}
	clear_saved_scope = affected_ruler_throughout
	# Struggle Catalysts. 朝贡涵化
	if = {
		limit = {
			any_character_struggle = {
				involvement = involved
					activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
					CATALYST = catalyst_tribute_important
					CHAR = scope:trigger_ruler_throughout
				}
			}
		}
		every_character_struggle = {
			involvement = involved
			activate_struggle_catalyst = {
				catalyst = catalyst_tribute_important
				character = scope:trigger_ruler_throughout
			}
		}
	}
}


SpecialRelevantFactorImpactOnRuler_type_A_04_impact_effect = {#自定义，对于每一类关系可定制
	clear_saved_scope = affected_ruler_throughout
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	scope:affected_ruler_throughout = {
		SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_04_A_character_modifier
		every_war_ally = {
			SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
				ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_04_trigger
				MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_04_A_character_modifier
				MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
			}
		}
		SpecialRelevantFactorImpactOnRuler_effect_alert_function_effect = {
			no_alert_flag = SpecialRelevantFactorImpactOnRuler_type_A_04_no_effect_alert
			effect_alert_event_id = SpecialRelevantFactorImpactOnRuler.2004
		}		
	}
	clear_saved_scope = affected_ruler_throughout
	# Struggle Catalysts. 出兵涵化
	if = {
		limit = {
			any_character_struggle = {
				involvement = involved
					activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
					CATALYST = catalyst_tribute_aid
					CHAR = scope:trigger_ruler_throughout
				}
			}
		}
		every_character_struggle = {
			involvement = involved
			activate_struggle_catalyst = {
				catalyst = catalyst_tribute_aid
				character = scope:trigger_ruler_throughout
			}
		}
	}
}

SpecialRelevantFactorImpactOnRuler_type_A_05_impact_effect = {#自定义，对于每一类关系可定制
#	add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_05_skip_affected_ruler years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes
	remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier
	remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_05_B_01_character_modifier


#	every_ally = {
#		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_05_trigger = { RULER = trigger_ruler_throughout } }
#		add_to_list = relevant_factor_list
#	}
	every_relation = {
		type = WLTDJ_tributary
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_05_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list

	}
	every_in_list = {
		list = relevant_factor_list
		save_scope_as = relevant_factor_throughout
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_05_skip_relevant_factor years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
		SpecialRelevantFactorImpactOnRuler_completed_tribute_count_effect = yes
		scope:affected_ruler_throughout = {
			if = {
				limit = { is_ai = yes }
				#add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRuler_type_A_05_add_modifier_effect = yes
			}
			else = {
				SpecialRelevantFactorImpactOnRuler_event_0001_parameter_calculation_effect = yes
				if = {
					limit = {
						#has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_minimum_maintenance
						has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_05_law_1
					}
					SpecialRelevantFactorImpactOnRuler_event_0001_option_A_effect = yes
				}
				else_if = {
					limit = {
						#has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_more_to_get_positive_modifier
						has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_05_law_2
					}
					SpecialRelevantFactorImpactOnRuler_event_0001_option_B_effect = yes
				}
				else_if = {
					limit = {
						has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_05_law_3
					}
					SpecialRelevantFactorImpactOnRuler_event_0001_option_C_effect = yes
				}
	#			else_if = {
	#				limit = {
	#					has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_05_law_4
	#				}
	#				SpecialRelevantFactorImpactOnRuler_event_0001_option_D_effect = yes
	#			}
				else = {
					trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0001 }
				}
			}
		}		

	}

	clear_saved_scope = affected_ruler_throughout
	clear_saved_scope = relevant_factor_throughout

	# Struggle Catalysts. 互市涵化
	if = {
		limit = {
			any_character_struggle = {
				involvement = involved
					activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
					CATALYST = catalyst_exchange
					CHAR = scope:trigger_ruler_throughout
				}
			}
		}
		every_character_struggle = {
			involvement = involved
			activate_struggle_catalyst = {
				catalyst = catalyst_exchange
				character = scope:trigger_ruler_throughout
			}
		}
	}
}


SpecialRelevantFactorImpactOnRuler_event_0001_parameter_calculation_effect = {
	save_scope_value_as = {
		name = pay_income_multiplier
		value = {
			value = scope:relevant_factor_throughout.max_military_strength
			divide = scope:affected_ruler_throughout.max_military_strength #兵力比值，超过此比例，赏赐如同岁币 0.1-2
			multiply = scope:relevant_factor_throughout.sub_realm_size
			divide = scope:affected_ruler_throughout.sub_realm_size #领土比值，领土比越大赏赐负担越小 0.01-1
			multiply = SpecialRelevantFactorImpactOnRuler_tribute_interval_year #朝贡要钱事件发生间隔
			multiply = 40 #再加一层倍率修正，可以看出每年给对方多少个月的收入（针对维持关系）
			multiply = { value = scope:relevant_factor_throughout.var:TributeSystem_completed_tribute_counter subtract = 1 multiply = 0.2 add = 1 } #每连续发生一次，花费比初次发生时加20%
		}
	}
}


SpecialRelevantFactorImpactOnRuler_event_0001_option_A_effect = {
	SpecialRelevantFactorImpactOnRuler_pay_income_function_effect = {
		ACTOR = affected_ruler_throughout
		TARGET = relevant_factor_throughout
		THRESHOLD = 2
		MONTHS = 1
		MULTIPLIER = pay_income_multiplier
	}
}

SpecialRelevantFactorImpactOnRuler_event_0001_option_B_effect = {
	SpecialRelevantFactorImpactOnRuler_pay_income_function_effect = {
		ACTOR = affected_ruler_throughout
		TARGET = relevant_factor_throughout
		THRESHOLD = 2
		MONTHS = 2
		MULTIPLIER = pay_income_multiplier
	}
	scope:affected_ruler_throughout = {
		save_scope_value_as = {
			name = temp_max_modifier_count
			value = { value = scope:relevant_factor_throughout.var:TributeSystem_completed_tribute_counter subtract = 1 }
		}
#		add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }


#		SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
#			MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_B_01_character_modifier
#			YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
#			MAXMODIFIERCOUNT = scope:temp_max_modifier_count
#		}
		
		SpecialRelevantFactorImpactOnRuler_type_A_05_add_modifier_effect = yes

		clear_saved_scope = temp_max_modifier_count
	}
}

SpecialRelevantFactorImpactOnRuler_event_0001_option_C_effect = {
	SpecialRelevantFactorImpactOnRuler_event_0001_option_B_effect = yes
	scope:affected_ruler_throughout = {
#		add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
		SpecialRelevantFactorImpactOnRuler_spawn_cultural_event_troop_function_C_effect = {
			ARMY_RECEIVER = affected_ruler_throughout
			ORIGINOWNER = relevant_factor_throughout
			SIZE_FACTOR = 0.05
			NAME = SpecialRelevantFactorImpactOnRuler.0001.c.troop.name
			COST_FACTOR = 0.5
		}
	}
}

SpecialRelevantFactorImpactOnRuler_event_0001_option_D_effect = {
	if = {
		limit = { is_allied_to = scope:relevant_factor_throughout }
		SpecialRelevantFactorImpactOnRuler_break_alliance_function_effect = { ACTOR = affected_ruler_throughout TARGET = relevant_factor_throughout }
	}
	if = {
		limit = { has_relation_WLTDJ_tributary = scope:relevant_factor_throughout }
		TributeSystem_break_tribute_relation_effect = {	SUZERAIN = affected_ruler_throughout TRIBUTARY = relevant_factor_throughout }
	}
}


SpecialRelevantFactorImpactOnRuler_type_A_05_add_modifier_effect = {
	scope:affected_ruler_throughout = {
		if = {
			limit = { is_ai = yes }
			if = {
				limit = { scope:relevant_factor_throughout = { TributeSystem_is_type_01_tributary_of_trigger = { suzerain = affected_ruler_throughout } } }
				add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_01_for_suzerain_initial_ai_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_01_for_suzerain_additional_ai_character_modifier
					YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
					MAXMODIFIERCOUNT = scope:temp_max_modifier_count
				}
			}
			else_if = {
				limit = { scope:relevant_factor_throughout = { TributeSystem_is_type_02_tributary_of_trigger = { suzerain = affected_ruler_throughout } } }
				add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_02_for_suzerain_initial_ai_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_02_for_suzerain_additional_ai_character_modifier
					YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
					MAXMODIFIERCOUNT = scope:temp_max_modifier_count
				}
			}
			else_if = {
				limit = { scope:relevant_factor_throughout = { TributeSystem_is_type_03_tributary_of_trigger = { suzerain = affected_ruler_throughout } } }
				add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_03_for_suzerain_initial_ai_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_03_for_suzerain_additional_ai_character_modifier
					YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
					MAXMODIFIERCOUNT = scope:temp_max_modifier_count
				}
			}
			else_if = {
				limit = { scope:relevant_factor_throughout = { TributeSystem_is_type_04_tributary_of_trigger = { suzerain = affected_ruler_throughout } } }
				add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_04_for_suzerain_initial_ai_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_04_for_suzerain_additional_ai_character_modifier
					YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
					MAXMODIFIERCOUNT = scope:temp_max_modifier_count
				}
			}
		}
		else = {
			if = {
				limit = { scope:relevant_factor_throughout = { TributeSystem_is_type_01_tributary_of_trigger = { suzerain = affected_ruler_throughout } } }
				add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_01_for_suzerain_initial_player_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_01_for_suzerain_additional_player_character_modifier
					YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
					MAXMODIFIERCOUNT = scope:temp_max_modifier_count
				}
			}
			else_if = {
				limit = { scope:relevant_factor_throughout = { TributeSystem_is_type_02_tributary_of_trigger = { suzerain = affected_ruler_throughout } } }
				add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_02_for_suzerain_initial_player_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_02_for_suzerain_additional_player_character_modifier
					YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
					MAXMODIFIERCOUNT = scope:temp_max_modifier_count
				}
			}
			else_if = {
				limit = { scope:relevant_factor_throughout = { TributeSystem_is_type_03_tributary_of_trigger = { suzerain = affected_ruler_throughout } } }
				add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_03_for_suzerain_initial_player_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_03_for_suzerain_additional_player_character_modifier
					YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
					MAXMODIFIERCOUNT = scope:temp_max_modifier_count
				}
			}
			else_if = {
				limit = { scope:relevant_factor_throughout = { TributeSystem_is_type_04_tributary_of_trigger = { suzerain = affected_ruler_throughout } } }
				add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_04_for_suzerain_initial_player_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
				SpecialRelevantFactorImpactOnRule_add_modifier_function_effect = {
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_05_tributary_04_for_suzerain_additional_player_character_modifier
					YEARS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
					MAXMODIFIERCOUNT = scope:temp_max_modifier_count
				}
			}
		}

	}
}




SpecialRelevantFactorImpactOnRuler_type_A_07_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes

	scope:affected_ruler_throughout = {
		every_relation = {
			type = WLTDJ_suzerain
			limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_07_trigger = { RULER = trigger_ruler_throughout } }
			add_to_list = relevant_factor_list
			if = {
				limit = { is_ai = no }
				save_temporary_scope_as = temp_player
			}
		}
		every_in_list = {
			list = relevant_factor_list
			SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
				ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_07_trigger
				MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_07_A_character_modifier
				MAXMODIFIERCOUNT = 0
			}
		}
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_07_A_character_modifier

		every_in_list = {
			list = relevant_factor_list
			culture = { save_temporary_scope_as = temp_culture }
			scope:affected_ruler_throughout.culture = {
				if = {
					limit = { NOT = { exists = var:WLTDJ_guiding_culture } }
					set_variable = { name = WLTDJ_guiding_culture value = scope:temp_culture }

				}

				else = {
					var:WLTDJ_guiding_culture = { save_temporary_scope_as = current_guiding_culture }
					save_temporary_scope_value_as = {
						name = temp_ratio
						value = { value = scope:temp_culture.culture_head.max_military_strength divide = scope:current_guiding_culture.culture_head.max_military_strength }
					}
					if = {
						limit = { scope:temp_ratio > 1 }
						set_variable = { name = WLTDJ_guiding_culture value = scope:temp_culture }
					}
				}
			}
		}

		scope:affected_ruler_throughout.culture = {
			if = {
				limit = { NOT = { exists = var:WLTDJ_learning_culture_progress } }
				set_variable = { name = WLTDJ_learning_culture_progress value = 0 }
			}
			if = {
				limit = { scope:affected_ruler_throughout = { is_ai = yes } }
				change_variable = { name = WLTDJ_learning_culture_progress add = { value = scope:affected_ruler_throughout.var:relevant_factor_count multiply = 0.1 add = 1} }
			}
			else = {
				change_variable = { name = WLTDJ_learning_culture_progress add = { value = scope:affected_ruler_throughout.var:relevant_factor_count multiply = 0.05 add = 0.5 } }
			}
			if = {
				limit = {
					var:WLTDJ_learning_culture_progress >= 100
					can_get_innovation_from = var:WLTDJ_guiding_culture
				}
				get_random_innovation_from = var:WLTDJ_guiding_culture

				if = {#弹窗提示
					limit = {
						scope:affected_ruler_throughout = {
							any_relation = {
								type = WLTDJ_suzerain
								is_ai = no
							}
						}
					}
					scope:temp_player = {
						send_interface_message = {	
							title = SpecialRelevantFactorImpactOnRuler_type_A_07_impact_effect_tip_A_for_ai_learner.tt
#							desc = SpecialRelevantFactorImpactOnRuler_type_A_07_impact_effect_tip_A_notification_for_ai_learner
							left_icon = scope:affected_ruler_throughout
						}
					}
				}

				if = {#弹窗提示
					limit = { scope:affected_ruler_throughout = { is_ai = no } }
					scope:affected_ruler_throughout = {
						send_interface_message = {	
							title = SpecialRelevantFactorImpactOnRuler_type_A_07_impact_effect_tip_A_for_player_learner.tt
#							desc = SpecialRelevantFactorImpactOnRuler_type_A_07_impact_effect_tip_A_notification_for_player_learner
							left_icon = scope:affected_ruler_throughout
						}
						trigger_event = { id = SpecialRelevantFactorImpactOnRuler.2007 }
					}
				}

				change_variable = { name = WLTDJ_learning_culture_progress subtract = 100 }
			}
		}
	}



	clear_saved_scope = affected_ruler_throughout
	clear_saved_scope = relevant_factor_throughout
	clear_saved_scope = temp_culture
	clear_saved_scope = current_guiding_culture
#	clear_variable_list = relevant_factor_variable_list

}


SpecialRelevantFactorImpactOnRuler_type_A_08_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	scope:affected_ruler_throughout = {
		SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_08_A_0_character_modifier
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_08_A_1_character_modifier
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_08_A_2_character_modifier
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_08_A_3_character_modifier
		remove_all_character_modifier_instances = SpecialRelevantFactorImpactOnRuler_type_A_08_B_character_modifier

		every_ally = {
			limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger = { RULER = trigger_ruler_throughout } }
			add_to_list = relevant_factor_list

		}
		every_relation = {
			type = WLTDJ_tributary
			limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger = { RULER = trigger_ruler_throughout } }
			add_to_list = relevant_factor_list

		}
		every_in_list = {
			list = relevant_factor_list
			save_temporary_scope_as = relevant_factor_throughout
			if = {
				limit = {
					scope:affected_ruler_throughout = {
						is_ai = yes
						tier_difference = { target = scope:affected_ruler_throughout value <= 0 }
					}
				}
				SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
					ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger
					MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_08_B_character_modifier
					MAXMODIFIERCOUNT = 1000 #可修改，修正叠加最大数量
				}
			}
			else_if = {
				limit = {
					scope:affected_ruler_throughout = {
						is_ai = no
					}
				}
				if = {
					limit = { tier_difference = { target = scope:affected_ruler_throughout value = -1 } }
					SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
						ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger
						MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_08_A_1_character_modifier
						MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
					}
				}
				else_if = {
					limit = { tier_difference = { target = scope:affected_ruler_throughout value = -0 } }
					SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
						ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger
						MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_08_A_0_character_modifier
						MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
					}
				}
				else_if = {
					limit = { tier_difference = { target = scope:affected_ruler_throughout value = -2 } }
					SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
						ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger
						MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_08_A_2_character_modifier
						MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
					}
				}
				else_if = {
					limit = { tier_difference = { target = scope:affected_ruler_throughout value = -3 } }
					SpecialRelevantFactorImpactOnRuler_relevant_factor_count_and_add_modifier_function_effect = {
						ISRELEVANTFACTORTYPETRIGGER = SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger
						MODIFIERNAME = SpecialRelevantFactorImpactOnRuler_type_A_08_A_3_character_modifier
						MAXMODIFIERCOUNT = 10 #可修改，修正叠加最大数量
					}
				}
			}
		}
		SpecialRelevantFactorImpactOnRuler_effect_alert_function_effect = {
			no_alert_flag = SpecialRelevantFactorImpactOnRuler_type_A_08_no_effect_alert
			effect_alert_event_id = SpecialRelevantFactorImpactOnRuler.2008
		}
	}
	clear_saved_scope = affected_ruler_throughout
}

############################################

SpecialRelevantFactorImpactOnRuler_type_A_09_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes

	every_courtier = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_09_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list
	}
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			if = {
#				limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_09_character_flag_auto_accept }
#				SpecialRelevantFactorImpactOnRuler_event_0002_option_A_effect = yes
#			}
#			else_if = {
#				limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_09_character_flag_auto_reject }
#				SpecialRelevantFactorImpactOnRuler_event_0002_option_B_effect = yes
#			}
#			else = {
#				trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0002 }
#			}
#		}
#	}

	if = {
		limit = {
#			has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_09_character_flag_auto_accept
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_09_law_1
		}
		SpecialRelevantFactorImpactOnRuler_event_0002_option_A_effect = yes
	}
	else_if = {
		limit = {
#			has_character_flag = has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_09_character_flag_auto_reject
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_09_law_2
		}
		SpecialRelevantFactorImpactOnRuler_event_0002_option_B_effect = yes
	}
	else = {
		trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0002 }
	}

	clear_saved_scope = affected_ruler_throughout
	clear_saved_scope = relevant_factor_throughout
}

#SpecialRelevantFactorImpactOnRuler_event_0002_option_A_effect = {不能删
#	pay_short_term_gold = {
#		target = scope:relevant_factor_throughout
#		gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_courtier_annuity_value
#	}	
#}

#SpecialRelevantFactorImpactOnRuler_event_0002_option_B_effect = {不能删
#	scope:relevant_factor_throughout = {
#		add_opinion = {
#			target = scope:affected_ruler_throughout
#			modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_my_annuity_courtier_opinion
#		}
#	}
#}


#SpecialRelevantFactorImpactOnRuler_event_0002_option_A_effect = {不能删
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			pay_short_term_gold = {
#				target = scope:relevant_factor_throughout
#				gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_courtier_annuity_value
#			}
#		}
#	}
#}


SpecialRelevantFactorImpactOnRuler_event_0002_option_A_effect = {
	#custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0002_option_A_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_gold = SpecialRelevantFactorImpactOnRuler_courtier_annuity_value
		}
	}
	remove_short_term_gold = SpecialRelevantFactorImpactOnRuler_courtier_total_annuity_value
}

SpecialRelevantFactorImpactOnRuler_event_0002_option_B_effect = {
	custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0002_option_B_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_opinion = {
				target = scope:affected_ruler_throughout
				modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_my_annuity_courtier_opinion
			}
		}
	}
}

############################################

SpecialRelevantFactorImpactOnRuler_type_A_10_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes

	every_councillor = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_10_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list
	}
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			if = {
#				limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_10_character_flag_auto_accept }
#				SpecialRelevantFactorImpactOnRuler_event_0003_option_A_effect = yes
#			}
#			else_if = {
#				limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_10_character_flag_auto_reject }
#				SpecialRelevantFactorImpactOnRuler_event_0003_option_B_effect = yes
#			}
#			else = {
#				trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0003 }
#			}
#		}		
#	}

	if = {
		limit = {
#			has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_10_character_flag_auto_accept
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_10_law_1
		}
		SpecialRelevantFactorImpactOnRuler_event_0003_option_A_effect = yes
	}
	else_if = {
		limit = {
#			has_character_flag = has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_10_character_flag_auto_reject
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_10_law_2
		}
		SpecialRelevantFactorImpactOnRuler_event_0003_option_B_effect = yes
	}
	else = {
		trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0003 }
	}

	clear_saved_scope = affected_ruler_throughout
	clear_saved_scope = relevant_factor_throughout
}

#SpecialRelevantFactorImpactOnRuler_event_0003_option_A_effect = {
#	pay_short_term_gold = {
#		target = scope:relevant_factor_throughout
#		gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_councillor_annuity_value
#	}	
#}

#SpecialRelevantFactorImpactOnRuler_event_0003_option_B_effect = {
#	scope:relevant_factor_throughout = {
#		add_opinion = {
#			target = scope:affected_ruler_throughout
#			modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_my_annuity_councillor_opinion
#		}
#	}
#}

#SpecialRelevantFactorImpactOnRuler_event_0003_option_A_effect = {
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			pay_short_term_gold = {
#				target = scope:relevant_factor_throughout
#				gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_councillor_annuity_value
#			}
#		}
#	}
#}

SpecialRelevantFactorImpactOnRuler_event_0003_option_A_effect = {
	#custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0003_option_A_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_gold = SpecialRelevantFactorImpactOnRuler_councillor_annuity_value
		}
	}
	remove_short_term_gold = SpecialRelevantFactorImpactOnRuler_councillor_total_annuity_value
}

SpecialRelevantFactorImpactOnRuler_event_0003_option_B_effect = {
	custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0003_option_B_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_opinion = {
				target = scope:affected_ruler_throughout
				modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_my_annuity_councillor_opinion
			}
		}
	}
}

############################################

SpecialRelevantFactorImpactOnRuler_type_A_11_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes

	every_vassal = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_11_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list
	}
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			if = {
#				limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_11_character_flag_auto_accept }
#				SpecialRelevantFactorImpactOnRuler_event_0004_option_A_effect = yes
#			}
#			else_if = {
#				limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_11_character_flag_auto_reject }
#				SpecialRelevantFactorImpactOnRuler_event_0004_option_B_effect = yes
#			}
#			else = {
#				trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0004 }
#			}
#		}		

		if = {
		limit = {
#			has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_11_character_flag_auto_accept
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_11_law_1
		}
			SpecialRelevantFactorImpactOnRuler_event_0004_option_A_effect = yes
		}
		else_if = {
		limit = {
#			has_character_flag = has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_11_character_flag_auto_reject
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_11_law_2
		}
			SpecialRelevantFactorImpactOnRuler_event_0004_option_B_effect = yes
		}
		else = {
			trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0004 }
		}
	}

	clear_saved_scope = affected_ruler_throughout
	clear_saved_scope = relevant_factor_throughout
}

#SpecialRelevantFactorImpactOnRuler_event_0004_option_A_effect = {
#	pay_short_term_gold = {
#		target = scope:relevant_factor_throughout
#		gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_direct_vassal_annuity_value
#	}	
#}

#SpecialRelevantFactorImpactOnRuler_event_0004_option_B_effect = {
#	scope:relevant_factor_throughout = {
#		add_opinion = {
#			target = scope:affected_ruler_throughout
#			modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_my_annuity_direct_vassal_opinion
#		}
#	}
#}

#SpecialRelevantFactorImpactOnRuler_event_0004_option_A_effect = {
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			pay_short_term_gold = {
#				target = scope:relevant_factor_throughout
#				gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_direct_vassal_annuity_value
#			}
#		}
#	}
#}

SpecialRelevantFactorImpactOnRuler_event_0004_option_A_effect = {
	#custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0004_option_A_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_gold = SpecialRelevantFactorImpactOnRuler_direct_vassal_annuity_value
		}
	}
	remove_short_term_gold = SpecialRelevantFactorImpactOnRuler_direct_vassal_total_annuity_value
}

SpecialRelevantFactorImpactOnRuler_event_0004_option_B_effect = {
	custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0004_option_B_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_opinion = {
				target = scope:affected_ruler_throughout
				modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_my_annuity_direct_vassal_opinion
			}
		}
	}
}

############################################

SpecialRelevantFactorImpactOnRuler_type_A_12_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes
	SpecialRelevantFactorImpactOnRuler_event_0005_preparation_effect = yes

	every_vassal_or_below = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_12_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list
	}
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			if = {
#				limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_12_character_flag_auto_accept }
#				SpecialRelevantFactorImpactOnRuler_event_0005_option_A_effect = yes
#			}
#			else_if = {
#				limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_12_character_flag_auto_reject }
#				SpecialRelevantFactorImpactOnRuler_event_0005_option_B_effect = yes
#			}
#			else = {
#				trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0005 }
#			}
#		}
#	}

	if = {
		limit = {
#			has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_12_character_flag_auto_accept
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_12_law_1
		}
		SpecialRelevantFactorImpactOnRuler_event_0005_option_A_effect = yes
	}
	else_if = {
		limit = {
#			has_character_flag = has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_12_character_flag_auto_reject
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_12_law_2
		}
		SpecialRelevantFactorImpactOnRuler_event_0005_option_B_effect = yes
	}
	else = {
		trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0005 }
	}

	clear_saved_scope = affected_ruler_throughout
	clear_saved_scope = relevant_factor_throughout
	remove_variable = SpecialRelevantFactorImpactOnRuler_average_county_monthly_income_variable

}


SpecialRelevantFactorImpactOnRuler_event_0005_preparation_effect = {
	set_variable = { name = SpecialRelevantFactorImpactOnRuler_average_county_monthly_income_variable value = SpecialRelevantFactorImpactOnRuler_average_county_monthly_income }

}

#SpecialRelevantFactorImpactOnRuler_event_0005_option_A_effect = {
#	pay_short_term_gold = {
#		target = scope:relevant_factor_throughout
#		gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_type_A_12_actual_total_subsidy_for_a_person
#	}
#	remove_short_term_gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_type_A_12_waste_total_subsidy_for_a_person
#}

#SpecialRelevantFactorImpactOnRuler_event_0005_option_B_effect = {
#	scope:relevant_factor_throughout = {
#		add_opinion = {
#			target = scope:affected_ruler_throughout
#			modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_subsidy_opinion
#		}
#	}
#}

#SpecialRelevantFactorImpactOnRuler_event_0005_option_A_effect = {
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			pay_short_term_gold = {
#				target = scope:relevant_factor_throughout
#				gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_type_A_12_actual_total_subsidy_for_a_person
#			}
#			remove_short_term_gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_type_A_12_waste_total_subsidy_for_a_person
#		}
#	}
#}

SpecialRelevantFactorImpactOnRuler_event_0005_option_A_effect = {
	#custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0005_option_A_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_gold = SpecialRelevantFactorImpactOnRuler_type_A_12_actual_total_subsidy_for_a_person
		}
	}
	remove_short_term_gold = SpecialRelevantFactorImpactOnRuler_type_A_12_aggregated_theoretical_total_subsidy
}

SpecialRelevantFactorImpactOnRuler_event_0005_option_B_effect = {
	custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0005_option_B_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_opinion = {
				target = scope:affected_ruler_throughout
				modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_subsidy_opinion
			}
		}
	}
}

############################################

SpecialRelevantFactorImpactOnRuler_type_A_13_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes

	if = {
		limit = { exists = house }
		house = {
			every_house_member = {
				limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_13_trigger = { RULER = trigger_ruler_throughout } }
				add_to_list = relevant_factor_list
			}
		}
	}
	every_close_family_member = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_13_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list
	}
	every_extended_family_member = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_13_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list
	}
	every_consort = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_13_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list
	}
	every_concubine = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_13_trigger = { RULER = trigger_ruler_throughout } }
		add_to_list = relevant_factor_list
	}

#	SpecialRelevantFactorImpactOnRuler_event_0006_launch_effect = yes #通过年初事件触发，旧机制
	SpecialRelevantFactorImpactOnRuler_type_A_13_calculation_effect = yes #通过内阁职位工资形式发放，新机制


	clear_saved_scope = affected_ruler_throughout
	clear_saved_scope = relevant_factor_throughout
}


SpecialRelevantFactorImpactOnRuler_type_A_13_calculation_effect = {
	set_variable = { name = SpecialRelevantFactorImpactOnRuler_loyal_family_related_court_position_total_salary_liege_perspective_variable value = SpecialRelevantFactorImpactOnRuler_loyal_family_related_court_position_total_salary_liege_perspective }
}


SpecialRelevantFactorImpactOnRuler_event_0006_launch_effect = {
	if = {
		limit = {
#			has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_13_character_flag_auto_accept
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_13_law_1

		}
		SpecialRelevantFactorImpactOnRuler_event_0006_option_A_effect = yes
	}
	else_if = {
		limit = {
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_13_law_2
		}
		SpecialRelevantFactorImpactOnRuler_event_0006_option_B_effect = yes
	}
	else_if = {
		limit = {
#			has_character_flag = has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_13_character_flag_auto_reject
			has_realm_law = SpecialRelevantFactorImpactOnRuler_type_A_13_law_3
		}
		SpecialRelevantFactorImpactOnRuler_event_0006_option_C_effect = yes
	}
	else = {
		trigger_event = { id = SpecialRelevantFactorImpactOnRuler.0006 }
	}
}



#SpecialRelevantFactorImpactOnRuler_event_0006_option_A_effect = {
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			pay_short_term_gold = {
#				target = scope:relevant_factor_throughout
#				gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_loyal_family_annuity_value
#			}
#		}
#	}
#}

SpecialRelevantFactorImpactOnRuler_event_0006_option_A_effect = {
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_gold = SpecialRelevantFactorImpactOnRuler_loyal_family_annuity_value
		}
	}
	remove_short_term_gold = SpecialRelevantFactorImpactOnRuler_loyal_family_total_annuity_value
}

#SpecialRelevantFactorImpactOnRuler_event_0006_option_B_effect = {
#	scope:affected_ruler_throughout = {
#		add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_13_A_1_character_modifier years = 1 }
#	}
#	every_in_list = {
#		list = relevant_factor_list
#		save_scope_as = relevant_factor_throughout
#		scope:affected_ruler_throughout = {
#			pay_short_term_gold = {
#				target = scope:relevant_factor_throughout
#				gold = scope:relevant_factor_throughout.SpecialRelevantFactorImpactOnRuler_loyal_family_extravegant_annuity_value
#			}
#		}
#		add_opinion = {
#			target = scope:affected_ruler_throughout
#			modifier = SpecialRelevantFactorImpactOnRuler_pay_me_extra_annuity_loyal_family_opinion
#		}
#		add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_13_A_2_character_modifier years = 1 }
#	}
#}

SpecialRelevantFactorImpactOnRuler_event_0006_option_B_effect = {
	custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0006_option_B_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_gold = SpecialRelevantFactorImpactOnRuler_loyal_family_extravegant_annuity_value
			add_opinion = {
				target = scope:affected_ruler_throughout
				modifier = SpecialRelevantFactorImpactOnRuler_pay_me_extra_annuity_loyal_family_opinion
			}
			add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_13_A_2_character_modifier years = 1 }
		}
	}
	add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_13_A_1_character_modifier years = 1 }
	remove_short_term_gold = SpecialRelevantFactorImpactOnRuler_loyal_family_extravegant_total_annuity_value
}


SpecialRelevantFactorImpactOnRuler_event_0006_option_C_effect = {
	custom_tooltip = SpecialRelevantFactorImpactOnRuler_event_0006_option_C_effect_custom_tooltip
	hidden_effect = {
		every_in_list = {
			list = relevant_factor_list
			add_opinion = {
				target = scope:affected_ruler_throughout
				modifier = SpecialRelevantFactorImpactOnRuler_refuse_to_pay_my_annuity_loyal_family_opinion
			}
		}
	}
}

############################################

SpecialRelevantFactorImpactOnRuler_type_A_14_impact_effect = {#自定义，对于每一类关系可定制
	scope:trigger_ruler_throughout = { save_scope_as = affected_ruler_throughout }
	SpecialRelevantFactorImpactOnRuler_affected_ruler_info_initialization_effect = yes

	every_ally = {
		limit = { SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_14_trigger = { RULER = trigger_ruler_throughout } }
#		add_to_list = relevant_factor_list
		save_temporary_scope_as = relevant_factor
		scope:affected_ruler_throughout = {
			send_interface_message = {	
				title = SpecialRelevantFactorImpactOnRuler_type_A_14_impact_effect_tip_A.tt
				desc = SpecialRelevantFactorImpactOnRuler_type_A_14_impact_effect_tip_A_notification
				left_icon = scope:relevant_factor
				break_alliance = scope:relevant_factor
			}
		}
	}

	clear_saved_scope = affected_ruler_throughout
	clear_saved_scope = relevant_factor_throughout
	clear_saved_scope = relevant_factor
}



